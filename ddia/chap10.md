
批处理

# 使用Unix工具的批处理

## 分析简单日志

统计浏览次数最多的网页
``` shell
cat /var/log/nginx/access.log | #1
awk '{print $7}' | #2
sort | #3
uniq -c | #4
sort -r -n | #5
head -n 5 #6
```
### 命令链与自定义程序

### 排序VS内存中的聚合

1. dict一类的内存容器可能放不下数据。
2. 如果工作集大于内存，那么排序（归并）的优点时可以高效的使用磁盘；

GNU Coreutils（Linux）中的 sort 程序通过溢出至磁盘的方式来自动应对大于内存的数据
集，并能同时使用多个CPU核进行并行排序【9】。

## Unix哲学
Unix管道的发明者道格·麦克罗伊（Doug McIlroy）在1964年首先描述了这种情况
【11】：“当我们需要将消息从一个程序传递另一个程序时，我们需要一种类似水管法兰的拼接程序的方式【a】 ，I/O应该也按照这种方式进行“。水管的类比仍然在生效，通过管道连接程序的想法成为了现在被称为Unix哲学的一部分 —— 这一组设计原则在Unix用户与开发者之
间流行起来，该哲学在1978年表述如下【12,13】：
1. 让每个程序都做好一件事。要做一件新的工作，写一个新程序，而不是通过添加“功能”让
老程序复杂化。
2. 期待每个程序的输出成为另一个程序的输入。不要将无关信息混入输出。避免使用严格
的列数据或二进制输入格式。不要坚持交互式输入。
3. 设计和构建软件，甚至是操作系统，要尽早尝试，最好在几周内完成。不要犹豫，扔掉
笨拙的部分，重建它们。
4. 优先使用工具来减轻编程任务，即使必须曲线救国编写工具，且在用完后很可能要扔掉
大部分。
这种方法 —— 自动化，快速原型设计，增量式迭代，对实验友好，将大型项目分解成可管理
的块 —— 听起来非常像今天的敏捷开发和DevOps运动。奇怪的是，四十年来变化不大。

### 统一接口

在Unix中，这种接口是一个文件（file）（更准确地说，是一个文件描述符）。

# MapReduce和分布式文件系统
